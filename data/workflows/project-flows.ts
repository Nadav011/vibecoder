import { ProjectFlow } from "./types";

// ================================
// WEB PROJECT FLOWS
// ================================

export const WEB_PROJECT_FLOWS: ProjectFlow[] = [
  {
    id: "new-project",
    name: "New Project",
    nameHe: "פרויקט חדש",
    icon: "rocket-outline",
    color: "#34D399",
    description: "יצירת פרויקט חדש מאפס - כולל כל השלבים מהתחלה",
    estimatedTime: "30-60 דקות",
    steps: [
      {
        stepNumber: 1,
        phase: "phase-boot",
        title: "Start Session",
        titleHe: "התחלת Session",
        description: "חובה להריץ בכל פתיחת Claude Code חדשה",
        commands: ["/boot"],
        tips: [
          "הרץ /boot בכל פעם שאתה פותח Claude Code",
          "אם עברו 25k tokens - הרץ /boot שוב",
        ],
        warning: "אם לא מריצים /boot - המערכת לא תעבוד נכון!",
        isRequired: true,
      },
      {
        stepNumber: 2,
        phase: "phase-0",
        title: "Scan & Map",
        titleHe: "סריקה ומיפוי",
        description: "יצירת הקשר ראשוני והבנת מה יש בתיקייה",
        commands: ["/scan", "/map", "/analyze"],
        tips: [
          "גם אם התיקייה ריקה - הרץ /scan",
          "/map יוצר דיאגרמת ארכיטקטורה",
        ],
        isRequired: true,
      },
      {
        stepNumber: 3,
        phase: "phase-1",
        title: "Initialize Project",
        titleHe: "אתחול הפרויקט",
        description: "יצירת כל הקבצים והמבנה הבסיסי",
        commands: ["/init new [project-name]"],
        tips: [
          "החלף [project-name] בשם הפרויקט שלך",
          "זה יוצר: package.json, tsconfig, מבנה תיקיות",
        ],
        isRequired: true,
      },
      {
        stepNumber: 4,
        phase: "phase-2",
        title: "Setup Types",
        titleHe: "הגדרת טייפים",
        description: "וידוא שכל הטייפים מוגדרים נכון",
        commands: ["/tpa audit", "/tpa fix --any"],
        tips: [
          "אפס any types = קוד יציב יותר",
          "אם יש שגיאות - /tpa fix --any מתקן אוטומטית",
        ],
        isRequired: true,
      },
      {
        stepNumber: 5,
        phase: "phase-2-6",
        title: "Create Design DNA",
        titleHe: "יצירת DNA עיצובי",
        description: "יצירת שפה עיצובית יחודית לפרויקט",
        commands: ["/ui dna", "/ui page home"],
        tips: [
          "/ui dna יוצר Design DNA יחודי",
          "/ui page home יוצר את הדף הראשון",
        ],
        isRequired: false,
      },
      {
        stepNumber: 6,
        phase: "phase-2-7",
        title: "Install Components",
        titleHe: "התקנת קומפוננטות",
        description: "התקנת קומפוננטות RTL-first מהספרייה",
        commands: ["/components list", "/components install mobile"],
        tips: [
          "/components list מראה את כל 65 הקומפוננטות",
          "/components install mobile מתקין את כל קומפוננטות המובייל",
          "כל הקומפוננטות תומכות ב-RTL",
        ],
        isRequired: false,
      },
      {
        stepNumber: 7,
        phase: "phase-3",
        title: "Run Tests",
        titleHe: "הרצת טסטים",
        description: "וידוא שהכל עובד לפני commit",
        commands: ["/qa run", "/verify-app"],
        tips: [
          "/qa run מריץ את כל הטסטים",
          "/verify-app פותח דפדפן ובודק ויזואלית",
        ],
        isRequired: true,
      },
      {
        stepNumber: 8,
        phase: "phase-4",
        title: "Certify Quality",
        titleHe: "אישור איכות",
        description: "בדיקת 49-Gate לפני commit",
        commands: ["/audit", "/certify"],
        tips: ["/audit בודק 49 קריטריונים", "צריך לעבור לפני כל commit"],
        warning: "אם הציון מתחת ל-35 - אסור לעשות commit!",
        isRequired: true,
      },
      {
        stepNumber: 9,
        phase: "phase-5",
        title: "Deploy to Git",
        titleHe: "שמירה ב-Git",
        description: "commit, push ו-PR",
        commands: ["/commit-push-pr"],
        tips: [
          "/commit-push-pr עושה הכל בפעולה אחת",
          "או לחלופין: /commit → /push → /pr",
        ],
        isRequired: true,
      },
      {
        stepNumber: 10,
        phase: "phase-5-5",
        title: "Deploy to Staging",
        titleHe: "פריסה ל-Staging",
        description: "בדיקה ב-staging לפני פרודקשן",
        commands: ["/deploy staging", "/deploy verify"],
        tips: [
          "תמיד לבדוק ב-staging לפני פרודקשן",
          "/deploy verify בודק עם Playwright",
        ],
        isRequired: true,
      },
      {
        stepNumber: 11,
        phase: "phase-5-5",
        title: "Deploy to Production",
        titleHe: "פריסה לפרודקשן",
        description: "פריסה לפרודקשן",
        commands: ["/deploy production"],
        tips: [
          "רק אחרי בדיקות staging מוצלחות",
          "אפשר להשתמש ב---force לעקוף בדיקות",
        ],
        warning: "אסור לפרוס לפרודקשן בלי לעבור staging!",
        isRequired: true,
      },
      {
        stepNumber: 12,
        phase: "phase-6",
        title: "Monitor Production",
        titleHe: "מעקב פרודקשן",
        description: "בדיקת בריאות אחרי פריסה",
        commands: ["/monitor status", "/monitor errors --last 1h"],
        tips: ["תמיד לבדוק שגיאות אחרי פריסה", "אם יש שגיאות - /hotfix start"],
        isRequired: true,
      },
    ],
  },
  {
    id: "existing-project",
    name: "Existing Project",
    nameHe: "פרויקט קיים",
    icon: "folder-open-outline",
    color: "#818CF8",
    description: "הצטרפות לפרויקט קיים - סריקה, הבנה ויישור",
    estimatedTime: "15-30 דקות",
    steps: [
      {
        stepNumber: 1,
        phase: "phase-boot",
        title: "Start Session",
        titleHe: "התחלת Session",
        description: "חובה להריץ בכל פתיחת Claude Code חדשה",
        commands: ["/boot"],
        tips: [
          "הרץ /boot בכל פעם שאתה פותח Claude Code",
          "אם עברו 25k tokens - הרץ /boot שוב",
        ],
        warning: "אם לא מריצים /boot - המערכת לא תעבוד נכון!",
        isRequired: true,
      },
      {
        stepNumber: 2,
        phase: "phase-0",
        title: "Deep Scan",
        titleHe: "סריקה עמוקה",
        description: "הבנת הפרויקט הקיים לעומק",
        commands: ["/scan --deep", "/map", "/analyze"],
        tips: [
          "--deep סורק יותר לעומק",
          "קורא את כל הקבצים ויוצר AI_CONTEXT.md",
        ],
        isRequired: true,
      },
      {
        stepNumber: 3,
        phase: "phase-1",
        title: "Align to Standards",
        titleHe: "יישור לתקנים",
        description: "יישור הפרויקט לסטנדרטים של OMEGA",
        commands: ["/init align --force"],
        tips: [
          "--force מיישר גם אם יש התנגשויות",
          "לא משנה קבצים קיימים - רק מוסיף חסרים",
        ],
        isRequired: true,
      },
      {
        stepNumber: 4,
        phase: "phase-2",
        title: "Fix Types",
        titleHe: "תיקון טייפים",
        description: "מציאת ותיקון בעיות טייפים",
        commands: ["/tpa audit", "/tpa fix --any"],
        tips: [
          "יכול למצוא הרבה any types בפרויקטים ישנים",
          "תיקון הדרגתי - לא חייב לתקן הכל בבת אחת",
        ],
        isRequired: false,
      },
      {
        stepNumber: 5,
        phase: "phase-2-6",
        title: "Discover Design",
        titleHe: "גילוי עיצוב",
        description: "הבנת השפה העיצובית הקיימת",
        commands: ["/ui discover --deep", "/ui slop-check"],
        tips: [
          "/ui discover מזהה את הסגנון הקיים",
          "/ui slop-check מוצא דפוסים גנריים",
        ],
        isRequired: false,
      },
      {
        stepNumber: 6,
        phase: "phase-3",
        title: "Run Tests",
        titleHe: "הרצת טסטים",
        description: "וידוא שהכל עובד",
        commands: ["/qa run", "/verify-app"],
        tips: [
          "אם אין טסטים - /qa heal יכול ליצור",
          "/verify-app בודק ויזואלית",
        ],
        isRequired: true,
      },
      {
        stepNumber: 7,
        phase: "phase-4",
        title: "Audit Quality",
        titleHe: "ביקורת איכות",
        description: "הבנת מצב האיכות הנוכחי",
        commands: ["/audit"],
        tips: [
          "הציון הראשוני יכול להיות נמוך - זה בסדר",
          "זה נותן לך baseline להשוואה",
        ],
        isRequired: true,
      },
      {
        stepNumber: 8,
        phase: "phase-5-5",
        title: "Deploy to Staging",
        titleHe: "פריסה ל-Staging",
        description: "בדיקה ב-staging",
        commands: ["/deploy staging"],
        tips: ["תמיד לבדוק ב-staging לפני פרודקשן"],
        isRequired: false,
      },
      {
        stepNumber: 9,
        phase: "phase-6",
        title: "Monitor",
        titleHe: "מעקב",
        description: "בדיקת שגיאות ובעיות",
        commands: ["/monitor errors --last 24h"],
        tips: ["אם יש שגיאות קריטיות - /hotfix start"],
        isRequired: false,
      },
    ],
  },
  {
    id: "emergency-flow",
    name: "Emergency Hotfix",
    nameHe: "תיקון חירום",
    icon: "flame-outline",
    color: "#EF4444",
    description: "כשיש באג קריטי בפרודקשן - workflow מהיר לתיקון",
    estimatedTime: "15-45 דקות",
    steps: [
      {
        stepNumber: 1,
        phase: "phase-6",
        title: "Identify Issue",
        titleHe: "זיהוי הבעיה",
        description: "הבנת מה השתבש",
        commands: ["/monitor errors --last 1h"],
        tips: ["בדוק שגיאות אחרונות", "זהה את הבעיה הקריטית"],
        warning: "אל תיכנס לפאניקה - תעבוד שלב אחרי שלב",
        isRequired: true,
      },
      {
        stepNumber: 2,
        phase: "phase-emergency",
        title: "Start Hotfix",
        titleHe: "פתיחת Hotfix",
        description: "יצירת branch חירום",
        commands: ["/hotfix start [issue-id]"],
        tips: [
          "תן ID ברור לבעיה (e.g., BUG-123)",
          "זה יוצר branch נפרד לתיקון",
        ],
        isRequired: true,
      },
      {
        stepNumber: 3,
        phase: "phase-2-5",
        title: "Investigate",
        titleHe: "חקירה",
        description: "מציאת מקור הבעיה",
        commands: ["/forensic", "/cld forensic"],
        tips: ["/forensic מחפש patterns", "מזהה קוד בעייתי"],
        isRequired: true,
      },
      {
        stepNumber: 4,
        phase: "phase-2-5",
        title: "Apply Fix",
        titleHe: "החלת תיקון",
        description: "תיקון הבעיה",
        commands: ["/hotfix apply", "/fix [file]"],
        tips: ["תיקון ממוקד - לא לשנות דברים אחרים", "שינויים מינימליים"],
        isRequired: true,
      },
      {
        stepNumber: 5,
        phase: "phase-emergency",
        title: "Verify Fix",
        titleHe: "אימות התיקון",
        description: "בדיקה שהתיקון עובד",
        commands: ["/hotfix verify", "/qa run"],
        tips: ["חובה לוודא שהתיקון פותר את הבעיה", "הרץ טסטים רלוונטיים"],
        warning: "לא לפרוס בלי אימות!",
        isRequired: true,
      },
      {
        stepNumber: 6,
        phase: "phase-emergency",
        title: "Fast Deploy",
        titleHe: "פריסה מהירה",
        description: "פריסה ישירה לפרודקשן",
        commands: ["/hotfix deploy --fast"],
        tips: ["--fast עוקף בדיקות staging", "רק לחירום אמיתי"],
        warning: "השתמש ב---fast רק כשממש דחוף!",
        isRequired: true,
      },
      {
        stepNumber: 7,
        phase: "phase-6",
        title: "Verify Production",
        titleHe: "אימות פרודקשן",
        description: "וידוא שהבעיה נפתרה",
        commands: ["/monitor errors --last 15m", "/monitor status"],
        tips: ["בדוק שאין שגיאות חדשות", "אם עדיין יש בעיה - /hotfix rollback"],
        isRequired: true,
      },
      {
        stepNumber: 8,
        phase: "phase-emergency",
        title: "Close Hotfix",
        titleHe: "סגירת Hotfix",
        description: "סגירת workflow החירום",
        commands: ["/hotfix close"],
        tips: ["מסמן שהחירום נפתר", "מתעד את התיקון"],
        isRequired: true,
      },
    ],
  },
];

// ================================
// FLUTTER PROJECT FLOWS
// ================================

export const FLUTTER_PROJECT_FLOWS: ProjectFlow[] = [
  {
    id: "flutter-new-project",
    name: "Flutter New Project",
    nameHe: "פרויקט Flutter חדש",
    icon: "phone-portrait-outline",
    color: "#02D7F2",
    description: "יצירת אפליקציית Flutter חדשה מאפס - כל השלבים",
    estimatedTime: "45-90 דקות",
    steps: [
      {
        stepNumber: 1,
        phase: "flutter-boot",
        title: "Start Flutter Session",
        titleHe: "התחלת Session Flutter",
        description: "חובה להריץ בכל פתיחת Claude Code עבור Flutter",
        commands: ["/flutter boot"],
        tips: [
          "הרץ /flutter boot בכל פעם שאתה פותח Claude Code",
          "אם עברו 25k tokens - הרץ /flutter boot שוב",
        ],
        warning: "אם לא מריצים /flutter boot - המערכת לא תעבוד נכון!",
        isRequired: true,
      },
      {
        stepNumber: 2,
        phase: "flutter-init",
        title: "Initialize Project",
        titleHe: "יצירת פרויקט",
        description: "יצירת פרויקט Flutter חדש עם ארכיטקטורה נכונה",
        commands: ["/flutter init new [project-name]"],
        tips: [
          "החלף [project-name] בשם הפרויקט שלך",
          "זה יוצר: pubspec.yaml, מבנה תיקיות, analysis_options",
        ],
        isRequired: true,
      },
      {
        stepNumber: 3,
        phase: "flutter-arch",
        title: "Setup Architecture",
        titleHe: "הגדרת ארכיטקטורה",
        description: "Clean Architecture + Feature-First",
        commands: ["/flutter arch analyze", "/flutter arch di"],
        tips: ["Feature-First לארגון קוד", "DI עם GetIt/Injectable"],
        isRequired: true,
      },
      {
        stepNumber: 4,
        phase: "flutter-tpa",
        title: "Setup Types",
        titleHe: "הגדרת טייפים",
        description: "Dart 3.x strict typing - Zero dynamic",
        commands: ["/flutter tpa strict", "/flutter tpa audit"],
        tips: [
          "אפס dynamic types = קוד יציב יותר",
          "הפעל strict mode ב-analysis_options.yaml",
        ],
        isRequired: true,
      },
      {
        stepNumber: 5,
        phase: "flutter-state",
        title: "Setup State Management",
        titleHe: "ניהול מצב",
        description: "Riverpod 3.0 State Management",
        commands: ["/flutter state setup"],
        tips: [
          "רק Riverpod 3.0 - לא Provider, לא Bloc",
          "AsyncNotifier לכל API call",
        ],
        isRequired: true,
      },
      {
        stepNumber: 6,
        phase: "flutter-firebase",
        title: "Setup Backend",
        titleHe: "הגדרת Backend",
        description: "Firebase או Supabase integration",
        commands: ["/flutter firebase init", "/flutter supabase init"],
        tips: [
          "Firebase - למי שרוצה NoSQL + Google ecosystem",
          "Supabase - למי שרוצה Postgres + Offline-first",
        ],
        isRequired: false,
      },
      {
        stepNumber: 7,
        phase: "flutter-ui",
        title: "Create Design",
        titleHe: "יצירת עיצוב",
        description: "Material 3 Theme + RTL-first",
        commands: ["/flutter ui theme", "/flutter ui page home"],
        tips: [
          "/flutter ui theme יוצר Material 3 theme",
          "/flutter ui page home יוצר את הדף הראשון",
        ],
        isRequired: true,
      },
      {
        stepNumber: 8,
        phase: "flutter-qa",
        title: "Run Tests",
        titleHe: "הרצת טסטים",
        description: "Unit + Widget + Integration tests",
        commands: ["/flutter qa run", "/flutter verify all"],
        tips: [
          "/flutter qa run מריץ את כל הטסטים",
          "/flutter verify all בודק על device אמיתי",
        ],
        isRequired: true,
      },
      {
        stepNumber: 9,
        phase: "flutter-git",
        title: "Deploy to Git",
        titleHe: "שמירה ב-Git",
        description: "OMEGA commit flow",
        commands: ["/flutter git commit"],
        tips: [
          "/flutter git commit עושה audit + commit",
          "DNA-Lock hash מוטמע אוטומטית",
        ],
        isRequired: true,
      },
    ],
  },
  {
    id: "flutter-existing-project",
    name: "Flutter Existing Project",
    nameHe: "פרויקט Flutter קיים",
    icon: "folder-open-outline",
    color: "#54C5F8",
    description: "הצטרפות לפרויקט Flutter קיים - סריקה, הבנה ויישור",
    estimatedTime: "20-40 דקות",
    steps: [
      {
        stepNumber: 1,
        phase: "flutter-boot",
        title: "Start Flutter Session",
        titleHe: "התחלת Session Flutter",
        description: "חובה להריץ בכל פתיחת Claude Code עבור Flutter",
        commands: ["/flutter boot"],
        tips: ["הרץ /flutter boot בכל פעם שאתה פותח Claude Code"],
        warning: "אם לא מריצים /flutter boot - המערכת לא תעבוד נכון!",
        isRequired: true,
      },
      {
        stepNumber: 2,
        phase: "flutter-prime",
        title: "Deep Scan",
        titleHe: "סריקה עמוקה",
        description: "הבנת הפרויקט הקיים לעומק",
        commands: ["/flutter scan --deep", "/flutter audit"],
        tips: [
          "--deep סורק יותר לעומק",
          "קורא את כל הקבצים ויוצר AI_CONTEXT.md",
        ],
        isRequired: true,
      },
      {
        stepNumber: 3,
        phase: "flutter-tpa",
        title: "Audit Types",
        titleHe: "בדיקת טייפים",
        description: "מציאת dynamic types ובעיות",
        commands: ["/flutter tpa audit", "/flutter tpa fix"],
        tips: [
          "יכול למצוא הרבה dynamic types בפרויקטים ישנים",
          "תיקון הדרגתי - לא חייב לתקן הכל בבת אחת",
        ],
        isRequired: true,
      },
      {
        stepNumber: 4,
        phase: "flutter-repair",
        title: "Diagnose Issues",
        titleHe: "אבחון בעיות",
        description: "מציאת בעיות נפוצות ותיקון",
        commands: ["/flutter repair diagnose", "/flutter repair fix"],
        tips: [
          "AST analysis מוצא בעיות אוטומטית",
          "תיקון deps, imports, null-safety",
        ],
        isRequired: false,
      },
      {
        stepNumber: 5,
        phase: "flutter-qa",
        title: "Run Tests",
        titleHe: "הרצת טסטים",
        description: "וידוא שהכל עובד",
        commands: ["/flutter qa run", "/flutter qa coverage"],
        tips: [
          "אם אין טסטים - /flutter qa heal יכול ליצור",
          "מינימום 80% coverage מומלץ",
        ],
        isRequired: true,
      },
      {
        stepNumber: 6,
        phase: "flutter-verify",
        title: "Verify on Device",
        titleHe: "אימות על מכשיר",
        description: "בדיקה על device אמיתי",
        commands: ["/flutter verify all"],
        tips: [
          "בודק על iOS Simulator + Android Emulator",
          "בודק RTL ו-Performance",
        ],
        isRequired: true,
      },
      {
        stepNumber: 7,
        phase: "flutter-monitor",
        title: "Setup Monitoring",
        titleHe: "הגדרת מעקב",
        description: "Crashlytics + Analytics",
        commands: ["/flutter monitor setup"],
        tips: ["Crashlytics לשגיאות", "Analytics למעקב שימוש"],
        isRequired: false,
      },
    ],
  },
];

// ================================
// COMBINED PROJECT FLOWS
// ================================

export const PROJECT_FLOWS: ProjectFlow[] = [
  ...WEB_PROJECT_FLOWS,
  ...FLUTTER_PROJECT_FLOWS,
];
